{% extends "base.html" %}

{% block content %}
<div class="dashboard">
    <!-- Controls -->
    <div class="controls-bar">
        <button class="btn btn-primary" onclick="triggerUpdate()">ğŸ”„ Update Now</button>
        <button class="btn btn-secondary" onclick="clearDisplay()">ğŸ—‘ï¸ Clear Display</button>
        <button class="btn btn-warning" onclick="toggleScheduler()" id="scheduler-toggle-btn">â¸ï¸ Pause Scheduler</button>
    </div>

    <div class="scheduler-status-bar" id="scheduler-status">
        <p class="loading">Loading scheduler status...</p>
    </div>

    <div class="dashboard-layout">
        <!-- Left Column: Display Preview -->
        <div class="dashboard-display">
            <div class="card display-preview-card">
                <h2>Current Display</h2>
                <div id="current-display-content">
                    <p class="loading">Loading current display...</p>
                </div>
            </div>
        </div>

        <!-- Right Column: Status Cards -->
        <div class="dashboard-status">
            <!-- System Status -->
            <div class="card">
                <h2>System Status</h2>
                <div id="status-content">
                    <p class="loading">Loading...</p>
                </div>
            </div>

            <!-- Connection Status -->
            <div class="card">
                <h2>Connections</h2>
                <div id="connections-content">
                    <p class="loading">Loading...</p>
                </div>
            </div>

            <!-- Source Stats -->
            <div class="card">
                <h2>Source Statistics</h2>
                <div id="source-stats-content">
                    <p class="loading">Loading source stats...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.dashboard-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    align-items: start;
}

.dashboard-display {
    min-width: 0;
}

.dashboard-status {
    display: flex;
    flex-direction: column;
    gap: 20px;
    min-width: 0;
}

.display-preview-card {
    height: fit-content;
}

@media (max-width: 1024px) {
    .dashboard-layout {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}